<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Table Example</title>
</head>
<body>
    <div class = "container mt-3"></div>
    <table id="myTable" class = "table table-secondary table-striped">
        <thead>
            <tr>
                <th>PatientId</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Contact</th>
                <th>Email</th>
                <th>Gender</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    </div>

    <script type = "module">

    // Import the functions you need from the SDKs you need
 import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
    apiKey: "AIzaSyC4vkPVUjbqnGAoDGmXLFYm5WOuR4-PhyQ",
    authDomain: "dgl-409.firebaseapp.com",
    databaseURL: "https://dgl-409-default-rtdb.firebaseio.com",
    projectId: "dgl-409",
    storageBucket: "dgl-409.appspot.com",
    messagingSenderId: "587821176763",
    appId: "1:587821176763:web:e9e9a293cd59725320969e",
    measurementId: "G-QSD6CP8DG3"
  };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    import {getDatabase, ref, get, set, child, update, remove, query, limitToLast, onValue, onChildAdded, onChildChanged}
    from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";
    const db = getDatabase(app);
    //const recentPostRef = query(ref(db,"Patient"), limitToLast(100));
    const recentPostRef =ref(db,"Patient");
    onValue(recentPostRef, (snapshot) => {
        var patients = []
        snapshot.forEach((childSnapshot) => {
            patients.push(childSnapshot.val())
            console.log('childsnapshot onValue', childSnapshot.key, childSnapshot.val())
            console.log(childSnapshot.key);

            while (tableBody.firstChild) {
            tableBody.removeChild(tableBody.firstChild);
            }
            for (var i = 0; i < patients.length; i++) {
            var row = tableBody.insertRow(i);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);

            cell1.innerHTML = patients[i].PatientID;
            cell2.innerHTML = patients[i].PatientFirstName;
            cell3.innerHTML = patients[i].PatientLastName;
            cell4.innerHTML = patients[i].Contact;
            cell5.innerHTML = patients[i].Email;
            cell6.innerHTML = patients[i].Gender;

        }
        })
    })
        // Data array
       

        // Get a reference to the table body
        var tableBody = document.getElementById("myTable").getElementsByTagName('tbody')[0];

        // Loop through the data array and create table rows and cells
      
    </script>
</body>
</html>
