<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <div class = "container mt-3">
        <table id = "myTable" class = "table table-secondary table striped">
            <thead>
                <th>PatientId</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Contact Number</th>
                <th>Email</th>
                <th>Gender</th>
            </thead>
            <tbody id = "tbody1"></tbody>
        </table>
    </div>
<script type = "module">
//---FILLING THE TABLE---//
var tbody = document.getElementById('tbody1');

function AddItemtoTable(patientid, fname, lname, contact, email, genbox){
    let trow = document.createElement("trow");
    let td1 = document.createElement('td');
    let td2 = document.createElement('td');
    let td3 = document.createElement('td');
    let td4 = document.createElement('td');
    let td5 = document.createElement('td');
    let td6 = document.createElement('td');

    td1.innerHTML = patientid;
    td2.innerHTML = fname;
    td3.innerHTML = lname;
    td4.innerHTML = contact;
    td5.innerHTML = email;
    td6.innerHTML = genbox;

    trow.appendChild(td1);
    trow.appendChild(td2);
    trow.appendChild(td3);
    trow.appendChild(td4);
    trow.appendChild(td5);
    trow.appendChild(td6);

    tbody.appendChild(trow);
}

function AddAllItemsToTable(){
    var tableBody = document.getElementById("myTable").getElementsByTagName('tbody')[0];

        // Loop through the data array and create table rows and cells
        for (var i = 0; i < data.length; i++) {
            var row = tableBody.insertRow(i);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);

            cell1.innerHTML = data[i].name;
            cell2.innerHTML = data[i].age;
        }
    
}
 // Import the functions you need from the SDKs you need
 import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
    apiKey: "AIzaSyC4vkPVUjbqnGAoDGmXLFYm5WOuR4-PhyQ",
    authDomain: "dgl-409.firebaseapp.com",
    databaseURL: "https://dgl-409-default-rtdb.firebaseio.com",
    projectId: "dgl-409",
    storageBucket: "dgl-409.appspot.com",
    messagingSenderId: "587821176763",
    appId: "1:587821176763:web:e9e9a293cd59725320969e",
    measurementId: "G-QSD6CP8DG3"
  };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    import {getDatabase, ref, get, set, child, update, remove, query, limitToLast, onValue, onChildAdded, onChildChanged}
    from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";

    import {getStorage, ref as sRef, uploadBytesResumable, getDownloadURL}
    from "https://www.gstatic.com/firebasejs/10.5.0/firebase-storage.js";

    const db = getDatabase(app);
    //const recentPostRef = query(ref(db,"Patient"), limitToLast(100));
    const recentPostRef =ref(db,"Patient")
    onValue(recentPostRef, (snapshot) => {
        snapshot.forEach((childSnapshot) => {
            var patients = [];
            console.log('childsnapshot onValue', childSnapshot.key, childSnapshot.val())
            
            patients.push(childSnapshot.key,childSnapshot.val())
            console.log(patients);
        })
    })

</script>
</body>
</html>